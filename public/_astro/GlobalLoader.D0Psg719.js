import{g as l}from"./index.ODjX2MmM.js";import{S as u}from"./SplitText.CE9jb_0x.js";import{S as m}from"./ScrambleTextPlugin.hKY4Tz1c.js";import{D as w}from"./DrawSVGPlugin.CmyyfxBq.js";import{E as S}from"./Layout.astro_astro_type_script_index_0_lang.D0haerwi.js";import"./strings.CrAViUxe.js";/*! js-cookie v3.0.5 | MIT */function d(r){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var s in i)r[s]=i[s]}return r}var y={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function p(r,o){function i(t,c,e){if(!(typeof document>"u")){e=d({},o,e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires&&(e.expires=e.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var h in e)e[h]&&(n+="; "+h,e[h]!==!0&&(n+="="+e[h].split(";")[0]));return document.cookie=t+"="+r.write(c,t)+n}}function s(t){if(!(typeof document>"u"||arguments.length&&!t)){for(var c=document.cookie?document.cookie.split("; "):[],e={},n=0;n<c.length;n++){var h=c[n].split("="),f=h.slice(1).join("=");try{var g=decodeURIComponent(h[0]);if(e[g]=r.read(f,g),t===g)break}catch{}}return t?e[t]:e}}return Object.create({set:i,get:s,remove:function(t,c){i(t,"",d({},c,{expires:-1}))},withAttributes:function(t){return p(this.converter,d({},this.attributes,t))},withConverter:function(t){return p(d({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(r)}})}var a=p(y,{path:"/"});l.registerPlugin(u,m,w);class A extends S{constructor(o,i,s,t){super(),this.app=t,this.container=o.container,this.container.classList.add("once"),this.checkPages=i,this.onceLoadMain=s,this.loaded=!1,this.loader=document.querySelector(".loader"),this.rows=this.loader.querySelectorAll(".loader_row"),this.text=this.loader.querySelectorAll("._24"),this.navLogo=document.querySelector(".nav_side-logo"),this.logoPaths=this.navLogo.querySelectorAll("path"),this.scrStagger=.03,this.scrDuration=.3,this.noLoader=window.location.hash==="#no-loader",this.checkNextToHideLogo=this.container.getAttribute("data-transition-page")==="home"||this.container.getAttribute("data-transition-page")==="projects",this.noLoader?(this.start(),this.onceLoadMain(),this.complete(),this.loader.classList.add("hidden"),l.set(this.logoPaths,{drawSVG:"0%"})):this.init()}async init(){this.alphabet="abcdefghijklmnopqrstuvwxyz",this.charsScrumble={stagger:this.scrStagger,duration:this.scrDuration,scrambleText:{text:"{original}",chars:this.alphabet}},this.split=new u(this.text,{type:"chars",charsClass:"loader_char"}),this.row1=this.rows[0].querySelectorAll(".loader_char"),this.row2=this.rows[1].querySelectorAll(".loader_char"),this.row3=this.rows[2].querySelectorAll(".loader_char"),this.tl=l.timeline({onStart:()=>this.start(),onComplete:()=>this.loader.classList.add("hidden"),defaults:{ease:"power3.inOut",duration:1},paused:!0});const o=a.get("loaded")?1:2,i=a.get("loaded")?.05:.1,s=a.get("loaded")?.03:.07,t=a.get("loaded")?.5:.7;this.tl.from(this.split.chars,{opacity:0,stagger:s,duration:t}).from(this.split.chars,{...this.charsScrumble,stagger:s,duration:t},"<").fromTo(this.logoPaths,{drawSVG:"0%"},{drawSVG:"100%",stagger:i,duration:o},"<").to(this.logoPaths,{"--alpha":0,stagger:i,duration:o,onComplete:()=>this.complete()},a.get("loaded")?"<":"<0.3").addLabel("loaded",">").set(this.navLogo,{pointerEvents:this.checkNextToHideLogo?"none":"all"},"<").to(this.logoPaths,{"--alpha":this.checkNextToHideLogo?100:0,stagger:{from:"end",each:.1},duration:.6}).to(this.logoPaths,{drawSVG:this.checkNextToHideLogo?"0%":"100%",stagger:{from:"end",each:.1},duration:.6},"<0.15").to(this.row1,this.charsScrumble,"<0.5").to(this.row2,this.charsScrumble,"<").to(this.row3,this.charsScrumble,"<").to(this.row1,{opacity:0,stagger:this.scrStagger,duration:this.scrDuration},"<0.1").to(this.row2,{opacity:0,stagger:this.scrStagger,duration:this.scrDuration},"<0.1").to(this.row3,{opacity:0,stagger:this.scrStagger,duration:this.scrDuration},"<").addLabel("finished"),this.tl.tweenTo("loaded")}counterUpdate(){this.loaderNums.forEach((o,i)=>{o.querySelector(".num_text").innerHTML=Math.round(this.counter.value)+"%"})}async start(){await this.onceLoadMain(),l.set([this.rows,this.navLogo],{opacity:1}),this.scroll=this.app.scroll.lenis,window.history.scrollRestoration="manual",await this.scroll.stop(),await this.scroll.scrollTo(0,{force:!0,duration:0})}async complete(){const o=a.get("loaded")?.1:this.app.sizes.width<1024?1.33:.7,i=(a.get("loaded"),.6);l.delayedCall(o,async()=>{await this.app.initGl(this.container),this.app.gl.on("loaded",async()=>{this.loaded||(await this.checkPages(this.app,i,this.container),this.noLoader||this.tl.play(),this.loaded=!0)}),this.app.loaderLoaded=!0,a.set("loaded",!0,{expires:7})})}}export{A as default};
