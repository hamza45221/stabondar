import{B as l}from"./ButtonHover.-uPohFOT.js";import{C as a}from"./CopyMail.Bgr41lNs.js";import{g as t}from"./index.ODjX2MmM.js";import{S as i}from"./ScrollTrigger.Dc0K9LmA.js";import"./SplitText.CE9jb_0x.js";import"./strings.CrAViUxe.js";import"./ScrambleTextPlugin.hKY4Tz1c.js";import"./Layout.astro_astro_type_script_index_0_lang.D0haerwi.js";t.registerPlugin(i);class y{constructor(s,e,r){this.main=s,this.app=e,this.gl=r,this.footer=this.main.querySelector("footer"),this.linkItems=this.footer.querySelectorAll(".footer_link, .footer_copy"),this.mail=this.footer.querySelector("[copy-mail]"),this.copyMail=new a(this.mail),this.linkItems.forEach(o=>l(o)),this.destroyed=!1,this.init(),this.app.on("resize",()=>{this.gl.world.loaded&&!this.destroyed&&this.resize()}),this.app.on("destroy",()=>this.destroyed=!0)}init(){this.paintMaterial=this.app.sizes.width>1024?this.gl.world.paint.material:null,this.mesh=this.app.sizes.width>1024?this.gl.world.paint.mesh:null,this.tl=t.timeline(),this.paintMaterial&&this.tl.fromTo(this.paintMaterial.uniforms.uAlpha,{value:0},{value:1,immediateRender:!1}),this.scroll=i.create({trigger:this.footer,start:"top 20%",end:"top top",scrub:!0,animation:this.tl,onEnter:()=>{this.gl.world.allowProjectsRender=!1,this.mesh&&(this.mesh.visible=!0),this.paintMaterial&&(this.paintMaterial.uniforms.uMask.value=1)},onLeaveBack:()=>{this.gl.world.allowProjectsRender=!0,this.mesh&&(this.mesh.visible=!1),this.paintMaterial&&(this.paintMaterial.uniforms.uMask.value=0)}})}resize(){this.tl.kill(),this.scroll.kill(),this.init()}}export{y as default};
