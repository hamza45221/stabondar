import{g as s}from"./index.ODjX2MmM.js";import{S as h}from"./ScrollTrigger.Dc0K9LmA.js";import{C as n}from"./CustomEase.DQFUKQsx.js";import{D as c}from"./DrawSVGPlugin.CmyyfxBq.js";import"./paths.D4zW0rYU.js";s.registerPlugin(h,n,c);class S{constructor(t,e,i){this.app=i,this.scroll=this.app.scroll.lenis,this.scroll.stop(),this.data=t,this.done=e,this.endSize=1.1,n.create("reveal","0.53, 0.02, 0, 0.99"),this.transition=document.querySelector(".transition"),this.items=this.transition.querySelectorAll(".transition_item"),this.nav=document.querySelector(".nav"),this.logoPaths=this.nav.querySelector(".nav_side-logo").querySelectorAll("path"),this.removeNavClasses(),this.nav.classList.remove("active"),this.createAnimation(),this.tl.play()}createAnimation(){this.tl&&this.tl.kill(),this.tl=s.timeline({defaults:{ease:"reveal"},paused:!0,onStart:()=>{this.transition.classList.add("active"),this.app.gl.loaded=!1},onComplete:()=>this.complete()}),this.checkNextToHideLogo=this.data.next.namespace==="home"||this.data.next.namespace==="projects",s.to(this.logoPaths,{"--alpha":this.checkNextToHideLogo?100:0,stagger:{from:"end",each:.1},duration:.6}),s.to(this.logoPaths,{drawSVG:this.checkNextToHideLogo?"0%":"100%",delay:.15,stagger:{from:"end",each:.1},duration:.6}),this.items.forEach((t,e)=>{const i=this.getRandom(.5,1.5),l=this.getRandom(.5,1.5),o=this.getRandom(.2,1);let a,r;e%2===0?(a=this.endSize+o,r=this.endSize-o):(r=this.endSize+o,a=this.endSize-o),this.tl.fromTo(t,{"--top":0},{"--top":a,duration:i},0).fromTo(t,{"--bottom":0},{"--bottom":r,duration:l},0)})}getRandom(t,e){return Math.random()*(e-t)+t}complete(){this.done(),h.getAll().forEach(t=>t.kill()),this.app.trigger("destroy")}removeNavClasses(){this.nav.classList.forEach(t=>{t!=="nav"&&this.nav.classList.remove(t)})}}export{S as default};
