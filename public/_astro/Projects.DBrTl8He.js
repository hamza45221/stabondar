import{g as s}from"./index.ODjX2MmM.js";import{S as o}from"./ScrollTrigger.Dc0K9LmA.js";s.registerPlugin(o);class c{constructor(t,i,e){this.main=t,this.app=i,this.gl=e,this.section=this.main.querySelector(".projects"),this.imgs=this.section.querySelectorAll(".projects_img"),this.scene=this.gl.scene,this.sizes=this.app.sizes,this.destroyed=!1,this.init(),this.app.on("resize",()=>this.resize()),this.app.on("destroy",()=>this.destroyed=!0)}init(){this.isMobile=this.sizes.width<1024,this.appearTl=s.timeline({defaults:{duration:1.6,ease:"power2.out"}}),this.scrollTl=s.timeline({defaults:{ease:"none"}}),this.imgs.forEach((t,i)=>{const e=this.isMobile?1:s.utils.random(.9,1.1,.05);if(!this.isMobile){this.imgsStore=this.gl.world.images.imgsStore;const{material:r}=this.imgsStore[i];this.appearTl.fromTo(r.uniforms.uAlpha,{value:0},{value:1,duration:1},0)}this.appearTl.fromTo(t,{"--opacity":0},{"--opacity":1,duration:1},0).fromTo(t,{"--position":0},{"--position":1,duration:1},0),this.scrollTl.fromTo(t,{"--scrollY":0},{"--scrollY":-this.sizes.height/2*e},0)}),this.appearTlScroll=o.create({trigger:this.section,start:"top top",end:"top top-=75%",scrub:!0,animation:this.appearTl,onEnter:()=>{this.gl.world.allowProjectsRender=!0,this.section.classList.add("active")},onLeaveBack:()=>{this.gl.world.allowProjectsRender=!1,this.section.classList.remove("active")}}),this.scrollTlScroll=o.create({trigger:this.section,start:"top top",end:"bottom bottom-=100%",scrub:!0,animation:this.scrollTl})}resize(){this.destroyed||(this.appearTl.kill(),this.scrollTl.kill(),this.appearTlScroll.kill(),this.scrollTlScroll.kill(),setTimeout(()=>this.init(),100))}}export{c as default};
