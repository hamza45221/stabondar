import{C as v}from"./ColorSideLogo.4PZqv2BI.js";import{E as g}from"./Layout.astro_astro_type_script_index_0_lang.D0haerwi.js";import{S}from"./ShowSideLogo.hzXxJkGV.js";import{g as t}from"./index.ODjX2MmM.js";import{S as h}from"./ScrollTrigger.Dc0K9LmA.js";import{S as f}from"./ScrambleTextPlugin.hKY4Tz1c.js";import{D as P}from"./DrawSVGPlugin.CmyyfxBq.js";import"./strings.CrAViUxe.js";t.registerPlugin(h,f,P);class _ extends g{constructor(e,i,s,o,r){super(),this.main=e,this.app=s,this.gl=i,this.pathTl=o,this.heroTl=r.tl,this.scene=this.gl.scene,this.sizes=this.app.sizes,this.paint=this.app.sizes.width>1024?this.gl.world.paint:null,this.videoPlain=this.app.sizes.width>1024?this.gl.world.video:null,this.pathProgressAnimate={value:0},this.section=this.main.querySelector(".hero"),this.videoWrapper=this.main.querySelector(".hero_video-wrapper"),this.videoParent=this.section.querySelector(".hero_video"),this.video=this.videoParent.querySelector("video"),this.mobLogo=this.section.querySelector(".hero_logo"),this.mobLogoPaths=this.mobLogo.querySelectorAll("path"),this.videoSound=this.videoParent.querySelector(".video-sound"),this.mobPathTl=t.timeline({paused:!0}),this.mobPathTl.fromTo(this.mobLogoPaths,{drawSVG:"0%"},{drawSVG:"100%",stagger:{each:.1,from:"end"},duration:1}).fromTo(this.mobLogoPaths,{"--alpha":100},{"--alpha":0,stagger:{each:.1,from:"end"},duration:1},"<0.3"),this.cols=this.section.querySelector(".hero_cols"),this.headingParent=this.section.querySelector(".hero_heading"),this.paths=[...this.section.querySelectorAll(".hero_letter-path")],this.numsParent=this.main.querySelector(".num"),this.num_1=this.numsParent.querySelector(".num_col:nth-child(1)"),this.num_2=this.numsParent.querySelector(".num_col:nth-child(2)"),this.num_3=this.numsParent.querySelector(".num_col:nth-child(4)"),this.num_4=this.numsParent.querySelector(".num_col:nth-child(6)"),this.app.scroll.lenis.start(),this.init(),setTimeout(()=>this.getCurrentWidth(),200),this.app.on("resize",()=>t.delayedCall(.01,()=>this.resize())),this.app.on("destroy",()=>this.destroy()),this.destroyed=!1,new S(this.section,"bottom 180%"),this.colorSideLogo=new v(this.section,"top 180%","white","red"),this.quickX=t.quickTo(this.videoSound,"--x",{duration:.2}),this.quickY=t.quickTo(this.videoSound,"--y",{duration:.2}),this.videoParent.addEventListener("mousemove",n=>this.videoMouseMove(n)),this.videoParent.addEventListener("mouseleave",()=>this.videoMouseLeave()),this.videoParent.addEventListener("mouseenter",()=>this.videoSound.classList.remove("hidden")),this.videoParent.addEventListener("click",()=>{this.video.muted?(this.video.currentTime=0,this.video.muted=!1,this.videoSound.innerHTML="mute",setTimeout(()=>{this.video.muted||this.videoSound.classList.add("hidden")},1e3)):(this.video.muted=!0,this.videoSound.innerHTML="unmute",this.videoSound.classList.remove("hidden"))})}pathStartAnimate(){this.pathStartTween=t.fromTo(this.pathProgressAnimate,{value:0},{value:1,duration:2.5,ease:"power1",onUpdate:()=>this.pathAnimate(),delay:.2})}init(){this.isDesktop=this.app.sizes.width>1024,t.set(this.videoWrapper,{"--width":470,"--position":0}),this.tlStart=t.timeline({duration:1,defaults:{duration:.9},onStart:()=>{this.pathStartTween&&this.pathStartTween.kill()}}),this.tlStart.fromTo(this.cols,{maskImage:"linear-gradient(270deg, transparent -25%, #000 0%, #000 100%, transparent 125%, transparent 125%)"},{maskImage:"linear-gradient(270deg, transparent 100%, #000 125%, #000 225%, transparent 250%, transparent 250%)",duration:.7},"<").fromTo(this.pathProgressAnimate,{value:1},{value:0,ease:"none",duration:1.2,onUpdate:()=>this.pathAnimate()},"<"),this.paint&&this.tlStart.fromTo(this.paint.material.uniforms.uAlpha,{value:1},{value:0,ease:"none",duration:.3},"<").to(this.num_1,{"--gap":400},0).to(this.num_2,{"--gap":500},"<").to(this.num_3,{"--gap":500},"<").to(this.num_4,{"--gap":350},"<"),this.tlStartScroll=h.create({trigger:this.section,start:"top top",end:`top top-=${this.isDesktop?200:150}%`,scrub:!0,animation:this.tlStart,onUpdate:e=>{this.update()},onLeave:()=>{this.paint&&(this.paint.mesh.visible=!1),this.heroTl.pause()},onEnterBack:()=>{this.paint&&(this.paint.mesh.visible=!0),this.heroTl.play()}}),this.tlEnd=t.timeline({duration:1,defaults:{duration:.9}}),t.set(this.videoWrapper,{"--btn-opacity":1,"--tb-opacity":1,"--pointer":"none"}),this.videoPlain?this.tlEnd.fromTo(this.videoWrapper,{"--width":470,"--tb-width":250,"--position":0,"--opacity":0},{"--width":1500,"--tb-width":728,"--position":50,"--opacity":1,ease:"none"},">").fromTo(this.videoPlain.material.uniforms.uScroll,{value:0},{value:1,ease:"none"},"<").fromTo(this.videoWrapper,{"--width":1500,"--btn-opacity":1},{"--width":window.innerHeight*1.7+1500,"--btn-opacity":0,immediateRender:!1},">1").fromTo(this.videoPlain.material.uniforms.uFillValue,{value:0},{value:1,ease:"none"},"<").set(this.videoParent,{pointerEvents:"none"},">").add(()=>this.stopVideo(),"<"):this.tlEnd.fromTo(this.videoWrapper,{"--width":470,"--tb-width":250,"--position":0,"--opacity":0},{"--width":1500,"--tb-width":728,"--position":50,"--opacity":1,ease:"none","--pointer":"all"},">").fromTo(this.videoWrapper,{"--width":1500,"--btn-opacity":1,"--tb-opacity":1},{"--width":window.innerHeight*1.7+1500,"--btn-opacity":0,"--tb-opacity":0,immediateRender:!1},">1").to(this.videoWrapper,{"--opacity":0},"<").set(this.videoParent,{pointerEvents:"none","--pointer":"none"},">").add(()=>this.stopVideo(),"<"),this.tlEndScroll=h.create({trigger:this.section,start:`top top-=${this.isDesktop?410:330}%`,end:"bottom bottom",scrub:!0,animation:this.tlEnd})}stopVideo(){this.videoParent.querySelector("video").muted=!0,this.videoSound.innerHTML="unmute",this.videoSound.classList.remove("hidden"),this.videoPlain&&(this.videoPlain.material.uniforms.uProgress.value=0)}pathAnimate(){this.pathTl.progress(this.pathProgressAnimate.value),this.mobPathTl.progress(this.pathProgressAnimate.value)}update(){this.getCurrentWidth(),this.trigger("update")}getCurrentWidth(){let e=this.videoParent.offsetWidth;this.videoWrapper.style.setProperty("--currentWidth",e);let i=this.videoParent.offsetHeight;this.videoWrapper.style.setProperty("--currentHeight",i)}videoMouseMove(e){const i=this.videoSound.offsetWidth,s=this.videoSound.offsetHeight,o=e.clientX,r=e.clientY,n=this.videoParent.getBoundingClientRect().left,a=this.videoParent.getBoundingClientRect().top,d=o-n,l=r-a,u=d-this.videoParent.offsetWidth/2,p=l-this.videoParent.offsetHeight/2,m=t.utils.clamp(this.videoParent.offsetWidth/-2+i/2+10,this.videoParent.offsetWidth/2-i/2-10,u),c=t.utils.clamp(this.videoParent.offsetHeight/-2+s/2+10,this.videoParent.offsetHeight/2-s/2-10,p);this.quickX(m),this.quickY(c)}videoMouseLeave(){this.quickX(0),this.quickY(0),this.videoSound.classList.remove("hidden")}resize(){this.destroyed||(this.paint=this.app.sizes.width>1024?this.gl.world.paint:null,this.videoPlain=this.app.sizes.width>1024?this.gl.world.video:null,this.getCurrentWidth(),this.tlStart.kill(),this.tlEnd.kill(),this.tlStartScroll.kill(),this.tlEndScroll.kill(),this.init())}destroy(){this.destroyed=!0,this.colorSideLogo.destroy(),this.tlStart.kill(),this.tlEnd.kill(),this.tlStartScroll.kill(),this.tlEndScroll.kill(),this.videoParent.removeEventListener("mousemove",e=>this.videoMouseMove(e)),this.videoParent.removeEventListener("mouseleave",()=>this.videoMouseLeave())}}export{_ as default};
