import{g as s}from"./index.ODjX2MmM.js";import{S as o}from"./ScrollTrigger.Dc0K9LmA.js";import{L as n}from"./lenis.BZyd43MX.js";import{T as c}from"./tempus.B_tY_6We.js";s.registerPlugin(o);class g{constructor(t,i){this.app=i,this.main=t,this.scroll=this.app.scroll.lenis,this.cube=this.main.querySelector(".cube_wrapper"),this.section=this.main.querySelector(".awards"),this.wrapper=this.section.querySelector(".awards_wrapper"),this.container=this.section.querySelector(".awards_container"),this.cursor=this.section.querySelector(".awards_cursor"),this.overlay=this.section.querySelector(".awards_overlay"),this.items=[...this.section.querySelectorAll(".awards_list-title"),...this.section.querySelectorAll(".awards_item")],this.open=!1,this.cursorSize=105/1920*window.innerWidth,this.wrapperWidth=this.wrapper.offsetWidth,this.wrapperHeight=this.wrapper.offsetHeight,this.mouse={x:0,y:0},this.quickX=s.quickTo(this.section,"--x",{duration:.2,ease:"power2.out"}),this.quickY=s.quickTo(this.section,"--y",{duration:.2,ease:"power2.out"}),this.init(),this.updateMouse(),this.cube.addEventListener("click",()=>{this.main.classList.contains("awards-active")&&this.toggle()}),this.overlay.addEventListener("click",()=>this.toggle()),this.app.on("resize",()=>this.resize()),this.cube.addEventListener("mouseleave",()=>{this.main.classList.contains("awards-active")&&this.app.sizes.width>1024&&this.cursor.classList.add("hide")}),this.cube.addEventListener("mouseenter",()=>{this.main.classList.contains("awards-active")&&this.app.sizes.width>1024&&this.cursor.classList.remove("hide")})}init(){this.awardsScroll=new n({wrapper:this.wrapper,container:this.container,eventsTarget:this.container,duration:1.4,easing:i=>i===1?1:1-Math.pow(2,-10*i),direction:"vertical",gestureDirection:"vertical",smoothWheel:!0,syncTouch:!1,syncTouchLerp:.08,wheelMultiplier:1.6}),this.awardsScroll.stop();const t=c.add(i=>this.awardsScroll.raf(i));this.app.on("destroy",()=>t())}updateMouse(){window.addEventListener("mousemove",t=>{if(this.open==!0||!this.main.classList.contains("awards-active"))return;const i=(t.clientX/window.innerWidth-.5)*window.innerWidth,e=(t.clientY/window.innerHeight-.5)*window.innerHeight;this.mouse.x=s.utils.clamp(-window.innerWidth/2+this.cursorSize/2+5,window.innerWidth/2-this.cursorSize/2-5,i),this.mouse.y=s.utils.clamp(-window.innerHeight/2+this.cursorSize/2+5,window.innerHeight/2-this.cursorSize/2-5,e),this.quickX(this.mouse.x),this.quickY(this.mouse.y)})}toggle(){if(this.section.classList.contains("open"))this.awardsScroll.scrollTo(0,{duration:.4,onComplete:()=>{this.scroll.start(),this.awardsScroll.stop(),this.section.classList.remove("open"),this.section.removeAttribute("data-lenis-prevent"),this.triggers&&this.triggers.forEach(t=>t.kill()),this.items.forEach(t=>t.classList.remove("active")),this.checkEnd.kill(),s.to(this.section,{"--percent":0,duration:.4}),setTimeout(()=>this.open=!1,900)}});else{this.open=!0;const t=s.utils.clamp(-window.innerWidth/2+this.wrapperWidth/2+10,window.innerWidth/2-this.wrapperWidth/2-10,this.mouse.x),i=s.utils.clamp(-window.innerHeight/2+this.wrapperHeight/2+10,window.innerHeight/2-this.wrapperHeight/2-10,this.mouse.y);this.quickX(t),this.quickY(i),this.checkActiveItems(),this.addCheckEnd(),this.scroll.stop(),this.awardsScroll.start(),this.section.classList.add("open"),this.section.setAttribute("data-lenis-prevent",""),this.createTriggers()}}checkActiveItems(){const t=this.wrapper.getBoundingClientRect().top;this.items.forEach(i=>{const e=i.getBoundingClientRect().top,r=i.offsetHeight;e<t&&e+r/2>t||e+r/2<t+this.wrapperHeight?(i.classList.add("active"),this.itemCheckCenter(i,e,t)):(i.classList.remove("active"),i.style.setProperty("--delay","0s"))})}createTriggers(){this.triggers=[],this.wrapper.getBoundingClientRect().top,this.items.forEach(t=>{const i=o.create({trigger:t,scroller:this.wrapper,start:"bottom bottom",end:"top top",onEnter:()=>t.classList.add("active"),onEnterBack:()=>t.classList.add("active"),onLeave:()=>t.classList.remove("active"),onLeaveBack:()=>t.classList.remove("active")});this.triggers.push(i)}),this.awardsScroll.on("scroll",()=>{this.items.forEach(t=>t.style.setProperty("--delay","0s")),this.triggers.forEach(t=>t.update)})}itemCheckCenter(t,i,e){const r=e+this.wrapperHeight/2,a=i+t.offsetHeight/2,h=Math.abs(r-a)/(this.wrapperHeight/2);t.style.setProperty("--delay",`${h/2+.2}s`)}addCheckEnd(){this.checkEnd=o.create({trigger:this.items[this.items.length-1],scroller:this.wrapper,start:"top 120%",end:"bottom bottom",animation:s.fromTo(this.section,{"--percent":0},{"--percent":100}),scrub:!0})}resize(){this.wrapperWidth=this.wrapper.offsetWidth,this.wrapperHeight=this.wrapper.offsetHeight,this.triggers&&this.triggers.forEach(t=>t.kill()),this.section.classList.contains("open")&&(this.createTriggers(),this.checkEnd.kill(),this.addCheckEnd())}}export{g as default};
