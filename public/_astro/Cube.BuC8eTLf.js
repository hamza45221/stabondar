import{g as i}from"./index.ODjX2MmM.js";import{S as u}from"./SplitText.CE9jb_0x.js";import{S as r}from"./ScrollTrigger.Dc0K9LmA.js";import{S as d}from"./ScrambleTextPlugin.hKY4Tz1c.js";import{T as m}from"./tempus.B_tY_6We.js";import{C as n}from"./ColorSideLogo.4PZqv2BI.js";import"./strings.CrAViUxe.js";i.registerPlugin(u,d,r);class k{constructor(s,t){this.app=t,this.main=s,this.scroll=this.app.scroll.lenis,this.wrapper=this.main.querySelector(".cube_wrapper"),this.cube=this.main.querySelector(".cube"),this.parts=this.main.querySelectorAll(".cube_part"),this.tiles=this.main.querySelectorAll(".cube_tile"),this.text_1=this.main.querySelectorAll(".cube_text.is-1"),this.text_2=this.main.querySelectorAll(".cube_text.is-2"),this.awards=this.main.querySelector(".awards"),this.alphabet="abcdefghijklmnopqrstuvwxyz",this.scrStagger=.03,this.scrDuration=.3,this.isInView=!1,this.charsAnimation={"--opacity":1,stagger:{amount:.6},duration:this.scrDuration},this.charsScrumble={stagger:{amount:.6},duration:this.scrDuration,scrambleText:{text:"{original}",chars:this.alphabet}},this.destroyed=!1,this.init(),this.settings(),this.app.on("resize",()=>this.resize());const e=m.add(()=>this.update());this.app.on("destroy",()=>{e(),this.destroy()})}init(){this.values={x:0,y:0,mouseX:0,mouseY:0,scrollX:0,scrollY:0},this.cubeRotateX=i.quickTo(this.cube,"--rotateY",{duration:.4}),this.cubeRotateY=i.quickTo(this.cube,"--rotateX",{duration:.4}),window.addEventListener("mousemove",s=>{if(!this.isInView)return;const t=(s.clientX/window.innerWidth-.5)*4,e=(s.clientY/window.innerHeight-.5)*4;this.values.mouseX=t,this.values.mouseY=e}),this.allChars=i.utils.toArray(this.main.querySelectorAll(".cube_char")),this.tls()}tls(){this.tl=i.timeline({paused:!0}),this.parts.forEach((s,t)=>{const e=s.querySelectorAll(".cube_side"),o=t*.1;e.forEach((a,h)=>{const c=h*.05,l=i.utils.toArray(a.querySelectorAll(".cube_char-1"));this.tl.fromTo(l,{"--opacity":0},this.charsAnimation,c+o).from(l,this.charsScrumble,"<")})}),this.parts.forEach((s,t)=>{const e=s.querySelectorAll(".cube_side"),o=t*.1;e.forEach((a,h)=>{a.querySelectorAll(".cube_tile");const c=h*.05,l=i.utils.toArray(a.querySelectorAll(".cube_char-1")),p=i.utils.toArray(a.querySelectorAll(".cube_char-2"));this.tl.to(l,{"--opacity":0,stagger:{amount:.6},duration:this.scrDuration},c+o+1.5).from(l,this.charsScrumble,"<").fromTo(p,{"--opacity":0},this.charsAnimation,"<0.3").from(p,this.charsScrumble,"<")})}),this.tl.to(this.parts,{"--sideRotate":1,stagger:.2},2).fromTo(this.wrapper,{autoAlpha:0,willChange:"none"},{autoAlpha:1,duration:.2,willChange:"opacity"},0),this.tlStart=r.create({trigger:this.wrapper,start:"top top",end:"bottom bottom+=75%",scrub:!0,animation:this.tl,onUpdate:()=>this.checkChar(this.allChars),onEnter:()=>this.isInView=!0,onLeaveBack:()=>this.isInView=!1}),this.scrollRotate=r.create({trigger:this.wrapper,start:"top top",end:"bottom bottom",scrub:!0,onUpdate:s=>{const t=s.progress,e=t*10,o=t*10;this.values.scrollX=e,this.values.scrollY=o}}),this.changeColor_1=r.create({trigger:this.wrapper,start:"top top-=50%",end:"top top-=200%",onEnter:()=>this.main.classList.add("red"),onLeaveBack:()=>this.main.classList.remove("red")}),this.colorSideLogoRed=new n(this.wrapper,"top top-=50%","black","white","top top-=200%",!0),this.changeColor_2=r.create({trigger:this.wrapper,start:"top top-=200%",end:"top top-=350%",onEnter:()=>{this.main.classList.remove("red"),this.main.classList.add("light")},onLeaveBack:()=>{this.main.classList.add("red"),this.main.classList.remove("light")}}),this.showAwards=r.create({trigger:this.wrapper,start:"top top-=250%",end:"top top-=350%",onEnter:()=>this.main.classList.add("awards-active"),onEnterBack:()=>this.main.classList.add("awards-active"),onLeave:()=>this.main.classList.remove("awards-active"),onLeaveBack:()=>this.main.classList.remove("awards-active")}),this.colorSideLogoWhite=new n(this.wrapper,"top top-=200%","red","black","top top-=350%",!0),this.changeColor_2=r.create({trigger:this.wrapper,start:"top top-=350%",end:"bottom bottom",onEnter:()=>{this.main.classList.remove("light"),this.awards.classList.remove("active")},onLeaveBack:()=>{this.main.classList.add("light")}}),this.colorSideLogoBlack=new n(this.wrapper,"top top-=350%","white","red","bottom bottom",!0),this.scrollEnd=r.create({trigger:this.wrapper,start:"bottom bottom+=20%",end:"bottom bottom",scrub:!0,animation:i.fromTo(this.wrapper,{autoAlpha:1,willChange:"opacity"},{autoAlpha:0,willChange:"none",immediateRender:!1}),onLeave:()=>this.isInView=!1,onEnterBack:()=>this.isInView=!0})}checkChar(s){s.forEach(t=>{t.parentElement.tagName==="SPAN"&&(parseInt(t.style.getPropertyValue("--opacity"))>=.98?t.classList.contains("complete")||t.classList.add("complete"):t.classList.contains("complete")&&t.classList.remove("complete"))})}resize(){this.destroyed||(this.tl.kill(),this.tlStart.kill(),this.scrollRotate.kill(),this.changeColor_1.kill(),this.changeColor_2.kill(),this.scrollEnd.kill(),this.colorSideLogoRed.destroy(),this.colorSideLogoWhite.destroy(),this.colorSideLogoBlack.destroy(),this.showAwards.kill(),this.tls())}update(){this.cubeRotateX(this.axis.y+this.values.mouseX+this.values.scrollX),this.cubeRotateY(this.axis.x-this.values.mouseY+this.values.scrollY)}destroy(){this.destroyed=!0,this.tl.kill(),this.tlStart.kill(),this.scrollRotate.kill(),this.changeColor_1.kill(),this.changeColor_2.kill(),this.scrollEnd.kill(),this.colorSideLogoRed.destroy(),this.colorSideLogoWhite.destroy(),this.colorSideLogoBlack.destroy(),this.showAwards.kill()}async settings(){this.axis={x:-24,y:52,z:-28,size:600,translateY:0,translateX:-106,scale:1.2,sideRotate:0},this.cube.style.setProperty("--rotateX",this.axis.x),this.cube.style.setProperty("--rotateY",this.axis.y),this.cube.style.setProperty("--rotateZ",this.axis.z),this.wrapper.style.setProperty("--translateY",this.axis.translateY),this.wrapper.style.setProperty("--translateX",this.axis.translateX),this.wrapper.style.setProperty("--scale",this.axis.scale),this.wrapper.style.setProperty("--sideRotate",this.axis.sideRotate)}}export{k as default};
